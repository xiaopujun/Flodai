# 工作流节点分类体系设计

## 背景

Flodai 工作流编辑器需要支持多种节点类型。为了保证节点体系在功能扩展和 UI 呈现上保持一致性，对节点进行统一的分类建模，并在左侧节点列表中按照分类分组展示。

本设计文档记录了当前版本采用的节点分类体系以及现有节点的归属情况，作为后续开发的参考基础。

## 节点分类总览

| 分类 ID       | 英文名称                         | 中文名称           | 主要作用                         |
| ------------- | -------------------------------- | ------------------ | -------------------------------- |
| triggers      | Triggers & Control               | 触发与控制         | 工作流入口、调度与流程控制       |
| ai            | AI Generation & Understanding    | AI 生成与理解      | 调用大模型及相关 AI 能力         |
| io            | IO & File Operations             | IO 与文件操作      | 文件及存储读写                   |
| integrations  | Data Sources & Integrations      | 数据源与集成       | 外部服务、数据库、向量库等集成   |
| code          | Code & Execution                 | 代码与执行         | 自定义脚本与任务执行             |
| transform     | Data Processing & Transform      | 数据处理与转换     | 数据格式转换、清洗与重组         |
| state         | State & Memory                   | 状态与上下文       | 会话、缓存与全局状态管理         |
| output        | Notifications & Outputs          | 通知与输出         | 向用户或外部系统输出结果         |
| human         | Human-in-the-Loop                | 用户交互           | 人在回路的审批与反馈             |
| tools         | Tools & Debugging                | 工具与调试         | 调试、监控与开发辅助             |

上述十个大类构成了工作流节点的分类基础，后续所有节点实现都应归属于其中之一。

## 现有节点与分类映射

当前已在编辑器中暴露的节点及其分类如下：

- Triggers & Control（triggers）
  - Trigger Node
- AI Generation & Understanding（ai）
  - AI Generator（对应节点类型 `aiNode`）
- IO & File Operations（io）
  - File Reader（对应节点类型 `fileNode`）
- Code & Execution（code）
  - Python Script

其余分类暂未实现具体节点，但已预留分类结构，用于后续扩展。

## 规划中的节点方向

当前尚未实现但在分类体系中预留的位置和典型节点方向包括：

- Triggers & Control
  - Scheduler / Cron Trigger
  - Webhook Trigger
  - Condition / If Node
  - Loop / For Each Node
- AI Generation & Understanding
  - Chat Conversation Node
  - Embedding Node
  - Text Classification Node
  - Image Generation Node
  - Audio Transcription Node
- IO & File Operations
  - File Writer
  - Directory Listing Node
  - File Watcher Node
  - Download URL Node
  - Cloud Storage Read/Write
- Data Sources & Integrations
  - HTTP Request / REST API Node
  - GraphQL Query Node
  - Database Query Node
  - Vector DB Query Node
- Data Processing & Transform
  - JSON Transform Node
  - Text Transform Node
  - Template Node
  - Map / Filter / Reduce Node
  - Chunking Node
- State & Memory
  - Key-Value Store Node
  - Session Context Node
  - Cache Get / Set Node
- Notifications & Outputs
  - Console / Log Node
  - Email Node
  - Chat Message Node
  - Webhook Response Node
- Human-in-the-Loop
  - Approval Node
  - Human Input Node
- Tools & Debugging
  - Debug Node
  - Metrics Node
  - Trace Node

具体实现时可以根据产品需求选择性落地上述节点，但其分类归属应保持不变。

## 左侧节点列表与分类的关系

工作流编辑器左侧的节点列表使用手风琴形式展示上述分类：

- 最外层为分类列表，每个分类对应一个折叠面板。
- 面板标题显示分类英文名称与中文说明。
- 面板展开时展示该分类下所有可用节点。
- 尚未实现具体节点的分类在面板内容区域显示占位文案，用于提示规划方向。

代码层面，节点分类在前端通过统一的数据结构建模，每个节点记录自身所属分类和节点类型标识。左侧面板通过这一配置渲染出最终的分组列表，保证 UI 呈现与分类体系保持同步。

